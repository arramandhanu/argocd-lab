# Production environment values
# High availability, proper resources, strict security

replicaCount: 3

image:
  tag: "1.25.3-alpine"
  pullPolicy: IfNotPresent

podSecurityContext:
  fsGroup: 101
  runAsNonRoot: true

securityContext:
  runAsNonRoot: true
  runAsUser: 101
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: false

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 200m
    memory: 256Mi

autoscaling:
  enabled: true
  minReplicas: 3
  maxReplicas: 20
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 75

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - nginx
          topologyKey: kubernetes.io/hostname

configMap:
  enabled: true
  data:
    index.html: |
      <!DOCTYPE html>
      <html>
      <head>
        <title>ArgoCD Lab - PRODUCTION</title>
        <style>
          body { font-family: sans-serif; text-align: center; padding: 50px; background: #0d1117; color: #c9d1d9; }
          h1 { color: #58a6ff; }
          .env { color: #f85149; font-size: 1.5em; font-weight: bold; }
          .badge { background: #da3633; padding: 5px 15px; border-radius: 20px; display: inline-block; margin: 10px; }
        </style>
      </head>
      <body>
        <h1>ArgoCD App-of-Apps Lab</h1>
        <p class="env"><span class="badge">PRODUCTION</span></p>
        <p>Deployed via Helm + ArgoCD</p>
        <p><small>Build: v1.0.0</small></p>
      </body>
      </html>
